<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriVoice API Test</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8">üåæ AgriVoice API Test</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- API Status -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold mb-4">API Status</h2>
                <button id="testApiBtn" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    Test API Connection
                </button>
                <div id="apiStatus" class="mt-4 p-3 bg-gray-100 rounded hidden">
                    <pre id="apiResponse" class="text-sm"></pre>
                </div>
            </div>

            <!-- Health Check -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold mb-4">Health Check</h2>
                <button id="healthBtn" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                    Check Health
                </button>
                <div id="healthStatus" class="mt-4 p-3 bg-gray-100 rounded hidden">
                    <pre id="healthResponse" class="text-sm"></pre>
                </div>
            </div>

            <!-- Categories -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold mb-4">Categories</h2>
                <button id="categoriesBtn" class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">
                    Get Categories
                </button>
                <div id="categoriesStatus" class="mt-4 p-3 bg-gray-100 rounded hidden">
                    <pre id="categoriesResponse" class="text-sm"></pre>
                </div>
            </div>

            <!-- Test Endpoint -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold mb-4">Test Endpoint</h2>
                <button id="testBtn" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">
                    Test Endpoint
                </button>
                <div id="testStatus" class="mt-4 p-3 bg-gray-100 rounded hidden">
                    <pre id="testResponse" class="text-sm"></pre>
                </div>
            </div>
        </div>

        <!-- Results Summary -->
        <div class="mt-8 bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-semibold mb-4">Connection Summary</h2>
            <div id="summary" class="space-y-2">
                <div class="flex items-center">
                    <span id="apiIcon" class="text-2xl mr-2">‚è≥</span>
                    <span>API Connection: <span id="apiText">Testing...</span></span>
                </div>
                <div class="flex items-center">
                    <span id="healthIcon" class="text-2xl mr-2">‚è≥</span>
                    <span>Health Check: <span id="healthText">Testing...</span></span>
                </div>
                <div class="flex items-center">
                    <span id="categoriesIcon" class="text-2xl mr-2">‚è≥</span>
                    <span>Categories: <span id="categoriesText">Testing...</span></span>
                </div>
                <div class="flex items-center">
                    <span id="testIcon" class="text-2xl mr-2">‚è≥</span>
                    <span>Test Endpoint: <span id="testText">Testing...</span></span>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';
        
        async function testAPI() {
            try {
                const response = await fetch(`${API_BASE}/`);
                const data = await response.json();
                
                document.getElementById('apiResponse').textContent = JSON.stringify(data, null, 2);
                document.getElementById('apiStatus').classList.remove('hidden');
                document.getElementById('apiIcon').textContent = '‚úÖ';
                document.getElementById('apiText').textContent = 'Connected';
            } catch (error) {
                document.getElementById('apiResponse').textContent = `Error: ${error.message}`;
                document.getElementById('apiStatus').classList.remove('hidden');
                document.getElementById('apiIcon').textContent = '‚ùå';
                document.getElementById('apiText').textContent = 'Failed';
            }
        }

        async function testHealth() {
            try {
                const response = await fetch(`${API_BASE}/health`);
                const data = await response.json();
                
                document.getElementById('healthResponse').textContent = JSON.stringify(data, null, 2);
                document.getElementById('healthStatus').classList.remove('hidden');
                document.getElementById('healthIcon').textContent = '‚úÖ';
                document.getElementById('healthText').textContent = 'Healthy';
            } catch (error) {
                document.getElementById('healthResponse').textContent = `Error: ${error.message}`;
                document.getElementById('healthStatus').classList.remove('hidden');
                document.getElementById('healthIcon').textContent = '‚ùå';
                document.getElementById('healthText').textContent = 'Failed';
            }
        }

        async function testCategories() {
            try {
                const response = await fetch(`${API_BASE}/categories`);
                const data = await response.json();
                
                document.getElementById('categoriesResponse').textContent = JSON.stringify(data, null, 2);
                document.getElementById('categoriesStatus').classList.remove('hidden');
                document.getElementById('categoriesIcon').textContent = '‚úÖ';
                document.getElementById('categoriesText').textContent = 'Working';
            } catch (error) {
                document.getElementById('categoriesResponse').textContent = `Error: ${error.message}`;
                document.getElementById('categoriesStatus').classList.remove('hidden');
                document.getElementById('categoriesIcon').textContent = '‚ùå';
                document.getElementById('categoriesText').textContent = 'Failed';
            }
        }

        async function testTestEndpoint() {
            try {
                const response = await fetch(`${API_BASE}/test`);
                const data = await response.json();
                
                document.getElementById('testResponse').textContent = JSON.stringify(data, null, 2);
                document.getElementById('testStatus').classList.remove('hidden');
                document.getElementById('testIcon').textContent = '‚úÖ';
                document.getElementById('testText').textContent = 'Working';
            } catch (error) {
                document.getElementById('testResponse').textContent = `Error: ${error.message}`;
                document.getElementById('testStatus').classList.remove('hidden');
                document.getElementById('testIcon').textContent = '‚ùå';
                document.getElementById('testText').textContent = 'Failed';
            }
        }

        // Event listeners
        document.getElementById('testApiBtn').addEventListener('click', testAPI);
        document.getElementById('healthBtn').addEventListener('click', testHealth);
        document.getElementById('categoriesBtn').addEventListener('click', testCategories);
        document.getElementById('testBtn').addEventListener('click', testTestEndpoint);

        // Auto-test on page load
        window.addEventListener('load', () => {
            setTimeout(testAPI, 500);
            setTimeout(testHealth, 1000);
            setTimeout(testCategories, 1500);
            setTimeout(testTestEndpoint, 2000);
        });
    </script>
</body>
</html> 